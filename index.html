<html>
<script>
 BrowserDetect = {
  init: function () {
    this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
    this.version = this.searchVersion(navigator.userAgent)
      || this.searchVersion(navigator.appVersion)
      || "an unknown version";
    this.OS = this.searchString(this.dataOS) || "an unknown OS";
  },
  searchString: function (data) {
    for (var i=0;i<data.length;i++) {
      var dataString = data[i].string;
      var dataProp = data[i].prop;
      this.versionSearchString = data[i].versionSearch || data[i].identity;
      if (dataString) {
        if (dataString.indexOf(data[i].subString) != -1)
          return data[i].identity;
      }
      else if (dataProp)
        return data[i].identity;
    }
  },
  searchVersion: function (dataString) {
    var index = dataString.indexOf(this.versionSearchString);
    if (index == -1) return;
    return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
  },
  dataBrowser: [
    {
      string: navigator.userAgent,
      subString: "Chrome",
      identity: "Chrome"
    },
    {   string: navigator.userAgent,
      subString: "OmniWeb",
      versionSearch: "OmniWeb/",
      identity: "OmniWeb"
    },
    {
      string: navigator.vendor,
      subString: "Apple",
      identity: "Safari",
      versionSearch: "Version"
    },
    {
      prop: window.opera,
      identity: "Opera",
      versionSearch: "Version"
    },
    {
      string: navigator.vendor,
      subString: "iCab",
      identity: "iCab"
    },
    {
      string: navigator.vendor,
      subString: "KDE",
      identity: "Konqueror"
    },
    {
      string: navigator.userAgent,
      subString: "Firefox",
      identity: "Firefox"
    },
    {
      string: navigator.vendor,
      subString: "Camino",
      identity: "Camino"
    },
    {   // for newer Netscapes (6+)
      string: navigator.userAgent,
      subString: "Netscape",
      identity: "Netscape"
    },
    {
      string: navigator.userAgent,
      subString: "MSIE",
      identity: "Explorer",
      versionSearch: "MSIE"
    },
    {
      string: navigator.userAgent,
      subString: "Gecko",
      identity: "Mozilla",
      versionSearch: "rv"
    },
    {     // for older Netscapes (4-)
      string: navigator.userAgent,
      subString: "Mozilla",
      identity: "Netscape",
      versionSearch: "Mozilla"
    }
  ],
  dataOS : [
    {
      string: navigator.platform,
      subString: "Win",
      identity: "Windows"
    },
    {
      string: navigator.platform,
      subString: "Mac",
      identity: "Mac"
    },
    {
         string: navigator.userAgent,
         subString: "iPhone",
         identity: "iPhone/iPod"
      },
    {
      string: navigator.platform,
      subString: "Linux",
      identity: "Linux"
    }
  ]

};
BrowserDetect.init();


chrome = "PGh0bWwgaTE4bi12YWx1ZXM9ImRpcjp0ZXh0ZGlyZWN0aW9uIiBkaXI9Imx0ciI+PGhlYWQ+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8iPgo8dGl0bGUgaTE4bi1jb250ZW50PSJ0aXRsZSI+aHR0cDovL3doYXQuY29tLyBpcyBub3QgYXZhaWxhYmxlPC90aXRsZT4KPHN0eWxlPgoKYm9keSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0U2RTZFNjsKICBmb250LWZhbWlseTogSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDEwcHQ7CiAgbWFyZ2luOiA1MHB4IDQwcHggMjBweCA0MHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKI21haW4tZnJhbWUtZXJyb3IgewogIG1hcmdpbjogYXV0bzsKICBtYXgtd2lkdGg6IDU0MHB4OwogIG1pbi13aWR0aDogMjAwcHg7Cn0KCi8qIERvbid0IHVzZSB0aGUgbWFpbiBmcmFtZSBkaXYgd2hlbiB0aGUgZXJyb3IgaXMgaW4gYSBzdWJmcmFtZS4gKi8KaHRtbFtzdWJmcmFtZV0gI21haW4tZnJhbWUtZXJyb3IgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi8qIERvbid0IHVzZSB0aGUgc3ViZnJhbWUgZXJyb3IgZGl2IHdoZW4gdGhlIGVycm9yIGlzIGluIGEgbWFpbiBmcmFtZS4gKi8KaHRtbDpub3QoW3N1YmZyYW1lXSkgI3N1Yi1mcmFtZS1lcnJvciB7CiAgZGlzcGxheTogbm9uZTsKfQoKI2JveCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZiZmJmYjsKICBib3JkZXI6IDFweCBzb2xpZCAjQUFBOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODg4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBjb2xvcjogYmxhY2s7Ci8qIE5vdCBkb25lIG9uIG1vYmlsZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gKi8KICBib3gtc2hhZG93OiAwcHggMnB4IDJweCAjQUFBOwp9CgpoMSB7CiAgY29sb3I6ICM2NjY7CiAgbWFyZ2luOiAxMHB4IDBweCAyNXB4IDBweDsKICBmb250LXdlaWdodDogbm9ybWFsOwogIGZvbnQtc2l6ZTogMS41ZW07Cn0KCmEgewogIGNvbG9yOiAjMTVjOwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKLmVycm9yLWltZyB7CiAgLyoqCiAgICogQ2FuJ3QgYWNjZXNzIGNocm9tZTovL3RoZW1lL0lEUl9FUlJPUl9ORVRXT1JLX0dFTkVSSUMgZnJvbSBhbiB1bnRydXN0ZWQKICAgKiByZW5kZXJlciBwcm9jZXNzLCBzbyBlbWJlZCB0aGUgcmVzb3VyY2UgbWFudWFsbHkuCiAgICovCiAgY29udGVudDogLXdlYmtpdC1pbWFnZS1zZXQoCiAgICAgIHVybCgnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDNEFBQUF1Q0FZQUFBQlh1U3MzQUFBQVdVbEVRVlJvM3UzVTBRMEFFUlJGUVQyKy9tdlpMUUVobTh2T0pQNklRMEpyQUFCa3FhcG5kZ2pmRVQ0ekorSUF2d3FQT01ESWJSNGZIdlZZcnduL2FxMXc0Y0lYTnUvOUhzSjNoWStHQ3ZjNFR3cGZHY0lCQUlLODdJMU93SUxwUXFzQUFBQUFTVVZPUks1Q1lJST0nKSAxeCwKICAgICAgdXJsKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUZ3QUFBQmNDQVlBQUFEajc5SllBQUFBbTBsRVFWUjQydTNYT3c0QUVCQkFRWGZjKzUrRldpZngzWmhKdE1UVDJGSUFBQUFBQUFBQUFBQklJaUxxaWFXMDRJSUxMdmorNEx2MjhRQ0NDeTY0NEhtRGV3REIzd3crR2tad3dmOEtiakFTWEhEQkJjL3pMY3h5cnVDQ0N5NjQ0SUlMTHJqZ2dnc3V1T0N2WG54MlZCZGNjTUVGRi94YzhOVkJCUmRjY01FRk4vZ0lMcmpnZ2d0K2Z3a3V1T0NDQ3c0QUFBQUFBQUFBQUowRytMRTdEQ3p6VjlVQUFBQUFTVVZPUks1Q1lJST0nKSAyeCk7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKfQoKI2NvbnRlbnQtdG9wIHsKICBtYXJnaW46IDIwcHggMjBweCAyMHB4IDI1cHg7Cn0KCiNoZWxwLWJveC1vdXRlciB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICAtd2Via2l0LXRyYW5zaXRpb246IGhlaWdodCBlYXNlLWluIDIxOG1zOwp9CgojaGVscC1ib3gtaW5uZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNFRUU7CiAgY29sb3I6ICM0NDQ7CiAgcGFkZGluZzogMjVweCAyMHB4OwogIHRleHQtYWxpZ246IHN0YXJ0Owp9Cgojc3VnZ2VzdGlvbnMgewogIG1hcmdpbi10b3A6IDE1cHg7Cn0KCiNzdWItZnJhbWUtZXJyb3ItZGV0YWlscyB7CiAgY29sb3I6ICM4RjhGOEY7Ci8qIE5vdCBkb25lIG9uIG1vYmlsZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gKi8KICB0ZXh0LXNoYWRvdzogMCAxcHggMCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7Cn0KCltqc2NvbnRlbnQ9ZmFpbGVkVXJsXSB7CiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsKfQoKYnV0dG9uIHsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJvcmRlci1yYWRpdXM6IDJweDsKICBjb2xvcjogIzQ0NDsKICBtYXJnaW46IDBweCA1cHg7CiAgbWluLWhlaWdodDogMjlweDsKICBtaW4td2lkdGg6IDY1cHg7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICBwYWRkaW5nOiA4cHggMTNweDsKLyogaU9TIGRvZXMgbm90IHN1cHBvcnQgbGluZWFyLWdyYWRpZW50IHdpdGhvdXQgYSBwcmVmaXguICovCiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoI2VkZWRlZCwgI2VkZWRlZCAzOCUsICNkZWRlZGUpOwogIHRleHQtc2hhZG93OiAwIDFweCAwIHJnYigyNDAsIDI0MCwgMjQwKTsKCi8qIE5vdCBkb25lIG9uIG1vYmlsZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gKi8KICBib3gtc2hhZG93OiAwIDFweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCksIGluc2V0IDAgMXB4IDJweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpOwp9CgpidXR0b246aG92ZXIgewogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKICBjb2xvcjogIzAwMDsKYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoI2YwZjBmMCwgI2YwZjBmMCAzOCUsICNlMGUwZTApOwoKYm94LXNoYWRvdzogMCAxcHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpLCBpbnNldCAwIDFweCAycHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjk1KTsKfQoKYnV0dG9uOmFjdGl2ZSB7CiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjMpOwogIGNvbG9yOiAjNDQ0OwpiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCgjZTdlN2U3LCAjZTdlN2U3IDM4JSwgI2Q3ZDdkNyk7Cgpib3gtc2hhZG93OiBub25lOwp9CgojcmVsb2FkLWJ1dHRvbiB7CiAgY29sb3I6ICNmZmY7CmJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KCM1ZDlhZmYsICM1ZDlhZmYgMzglLCAjNTg5MWYwKTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDQ1LCAxMDIsIDE5NSwgMSk7CiAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgcmdiYSgwLDAsMCwwLjUpOwoKYm94LXNoYWRvdzogMCAxcHggMCByZ2JhKDAsIDAsIDAsIDAuMTUpLCBpbnNldCAwIDFweCAycHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwp9CgojcmVsb2FkLWJ1dHRvbjpob3ZlciB7CmJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KCM2NTllZmQsICM2NTllZmQgMzglLCAjNjA5N2YxKTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDQ1LCAxMDIsIDE5NSwgMSk7CmJveC1zaGFkb3c6IDAgMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KSwgaW5zZXQgMCAxcHggMnB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKfQoKI3JlbG9hZC1idXR0b246YWN0aXZlIHsKYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoIzYwOTVlZCwgIzYwOTVlZCAzOCUsICM2MDk1ZWQpOwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYigzOCwgODQsIDE2MCk7Cgpib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjEpOwp9CgouaGlkZGVuIHsKICBkaXNwbGF5OiBub25lOwp9Cgouc3VnZ2VzdGlvbnMgewogIG1hcmdpbi10b3A6IDE4cHg7Cn0KCi5zdWdnZXN0aW9uLWhlYWRlciB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgbWFyZ2luLWJvdHRvbTogNHB4Owp9Cgouc3VnZ2VzdGlvbi1ib2R5IHsKICBjb2xvcjogIzc3NzsKfQoKLmVycm9yLWNvZGUgewogIGNvbG9yOiAjQTBBMEEwOwogIG1hcmdpbi10b3A6IDE1cHg7Cn0KCi8qIEluY3JlYXNlIGxpbmUgaGVpZ2h0IGF0IGhpZ2hlciByZXNvbHV0aW9ucy4gKi8KQG1lZGlhIChtaW4td2lkdGg6IDY0MXB4KSBhbmQgKG1pbi1oZWlnaHQ6IDY0MXB4KSB7CiAgI2hlbHAtYm94LWlubmVyIHsKICAgIGxpbmUtaGVpZ2h0OiAxOHB4OwogIH0KfQoKLyogRGVjcmVhc2UgcGFkZGluZyBhdCBsb3cgc2l6ZXMuICovCkBtZWRpYSAobWF4LXdpZHRoOiA2NDBweCksIChtYXgtaGVpZ2h0OiA2NDBweCkgewogIGJvZHkgewogICAgbWFyZ2luOiAxNXB4OwogIH0KICBoMSB7CiAgICBtYXJnaW46IDEwcHggMHB4IDE1cHggMHB4OwogIH0KICAjY29udGVudC10b3AgewogICAgbWFyZ2luOiAxNXB4OwogIH0KICAjaGVscC1ib3gtaW5uZXIgewogICAgcGFkZGluZzogMjBweDsKICB9CiAgLnN1Z2dlc3Rpb25zIHsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgfQogIC5zdWdnZXN0aW9uLWhlYWRlciB7CiAgICBtYXJnaW4tYm90dG9tOiAwcHg7CiAgfQogIC5lcnJvci1jb2RlIHsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgfQp9CgovKiBEb24ndCBhbGxvdyBvdmVyZmxvdyB3aGVuIGluIGEgc3ViZnJhbWUuICovCmh0bWxbc3ViZnJhbWVdIGJvZHkgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KCiNzdWItZnJhbWUtZXJyb3IgewogIC13ZWJraXQtYWxpZ24taXRlbXM6IGNlbnRlcjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjREREOwogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICAtd2Via2l0LWZsZXgtZmxvdzogY29sdW1uOwogIGhlaWdodDogMTAwJTsKICAtd2Via2l0LWp1c3RpZnktY29udGVudDogY2VudGVyOwogIGxlZnQ6IDBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwcHg7CiAgd2lkdGg6IDEwMCU7Cn0KCiNzdWItZnJhbWUtZXJyb3I6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNFRUU7Cn0KCiNzdWItZnJhbWUtZXJyb3ItZGV0YWlscyB7CiAgbWFyZ2luOiAwIDEwcHg7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CgovKiBTaG93IGRldGFpbHMgb25seSB3aGVuIGhvdmVyaW5nLiAqLwojc3ViLWZyYW1lLWVycm9yOmhvdmVyICNzdWItZnJhbWUtZXJyb3ItZGV0YWlscyB7CiAgdmlzaWJpbGl0eTogdmlzaWJsZTsKfQoKLyogSWYgdGhlIGlmcmFtZSBpcyB0b28gc21hbGwsIGFsd2F5cyBoaWRlIHRoZSBlcnJvciBjb2RlLiAqLwovKiBUT0RPKG1tZW5rZSk6IFNlZSBpZiBvdmVyZmxvdzogbm8tZGlzcGxheSB3b3JrcyBiZXR0ZXIsIG9uY2Ugc3VwcG9ydGVkLiAqLwpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpLCAobWF4LWhlaWdodDogOTVweCkgewogICNzdWItZnJhbWUtZXJyb3ItZGV0YWlscyB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQoKPC9zdHlsZT4KPHNjcmlwdD4KCmZ1bmN0aW9uIHRvZ2dsZUhlbHBCb3goKSB7CiAgdmFyIGhlbHBCb3hPdXRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWxwLWJveC1vdXRlcicpOwogIGhlbHBCb3hPdXRlci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTsKICB2YXIgbW9yZUxlc3NCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9yZS1sZXNzLWJ1dHRvbicpOwogIGlmIChoZWxwQm94T3V0ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgewogICAgbW9yZUxlc3NCdXR0b24uaW5uZXJUZXh0ID0gbW9yZUxlc3NCdXR0b24ubW9yZVRleHQ7CiAgfSBlbHNlIHsKICAgIG1vcmVMZXNzQnV0dG9uLmlubmVyVGV4dCA9IG1vcmVMZXNzQnV0dG9uLmxlc3NUZXh0OwogIH0KfQoKLy8gU3ViZnJhbWVzIHVzZSBhIGRpZmZlcmVudCBsYXlvdXQgYnV0IHRoZSBzYW1lIGh0bWwgZmlsZS4gIFRoaXMgaXMgdG8gbWFrZSBpdAovLyBlYXNpZXIgdG8gc3VwcG9ydCBwbGF0Zm9ybXMgdGhhdCBsb2FkIHRoZSBlcnJvciBwYWdlIHZpYSBkaWZmZXJlbnQKLy8gbWVjaGFuaXNtcyAoQ3VycmVudGx5IGp1c3QgaU9TKS4KaWYgKHdpbmRvdy50b3AubG9jYXRpb24gIT0gd2luZG93LmxvY2F0aW9uKQogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N1YmZyYW1lJywgJycpOwoKPC9zY3JpcHQ+PC9oZWFkPgoKCgo8Ym9keSBpZD0idCIganN0Y2FjaGU9IjAiPgo8ZGl2IGlkPSJtYWluLWZyYW1lLWVycm9yIiBqc3RjYWNoZT0iMCI+CiA8ZGl2IGlkPSJib3giIGpzdGNhY2hlPSIwIj4KICA8ZGl2IGlkPSJjb250ZW50LXRvcCIganN0Y2FjaGU9IjAiPgogICAgPGgxIGpzdGNhY2hlPSIwIj4KICAgICA8ZGl2IGpzdGNhY2hlPSIwIj48aW1nIGNsYXNzPSJlcnJvci1pbWciIGpzdGNhY2hlPSIwIj48L2Rpdj4KICAgICA8c3BhbiBpMThuLWNvbnRlbnQ9ImhlYWRpbmciIGpzdGNhY2hlPSIwIj5VbmFibGUgdG8gY29ubmVjdCB0byB0aGUgSW50ZXJuZXQ8L3NwYW4+CiAgICA8L2gxPgoKICAgIDxidXR0b24gaWQ9InJlbG9hZC1idXR0b24iIG9uY2xpY2s9ImxvY2F0aW9uID0gdGhpcy51cmwiIGpzc2VsZWN0PSJyZWxvYWQiIGpzdmFsdWVzPSIudXJsOnJlbG9hZFVybCIganNjb250ZW50PSJtc2ciIGpzdGNhY2hlPSIzIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0ibW9yZS1sZXNzLWJ1dHRvbiIgb25jbGljaz0idG9nZ2xlSGVscEJveCgpIiBqc2Rpc3BsYXk9Im1vcmUiIGpzdmFsdWVzPSIubW9yZVRleHQ6bW9yZTsgLmxlc3NUZXh0Omxlc3M7IiBqc2NvbnRlbnQ9Im1vcmUiIGpzdGNhY2hlPSI0Ij5Nb3JlPC9idXR0b24+CiAgPC9kaXY+CgogIDwhLS0gT3V0ZXIgYW5kIGlubmVyIGRpdnMgYXJlIG5lZWRlZCBib3RoIGZvciBtYXJnaW5zIGFuZCBzaXppbmcuIC0tPgogIDxkaXYgaWQ9ImhlbHAtYm94LW91dGVyIiBjbGFzcz0iaGlkZGVuIiBqc3RjYWNoZT0iMCI+CiAgIDxkaXYgaWQ9ImhlbHAtYm94LWlubmVyIiBqc3RjYWNoZT0iMCI+CiAgICA8ZGl2IGpzc2VsZWN0PSJzdW1tYXJ5IiBqc3RjYWNoZT0iNSI+CiAgICAgPHNwYW4ganN2YWx1ZXM9Ii5pbm5lckhUTUw6bXNnIiBqc3RjYWNoZT0iOCI+PHNwYW4ganNjb250ZW50PSJwcm9kdWN0TmFtZSIganN0Y2FjaGU9IjExIj5Hb29nbGUgQ2hyb21lPC9zcGFuPgogICAgICAgICAgY2FuJ3QgZGlzcGxheSB0aGUgd2VicGFnZSBiZWNhdXNlIHlvdXIgY29tcHV0ZXIgaXNuJ3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm5ldC4KICAgICAgICAgIDxiciBqc3RjYWNoZT0iMCI+PGJyIGpzdGNhY2hlPSIwIj4KICAgICAgICAgIFlvdSBjYW4gdHJ5IHRvIGRpYWdub3NlIHRoZSBwcm9ibGVtIGJ5IHRha2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOgogICAgICAgICAgPGJyIGpzdGNhY2hlPSIwIj48YnIganN0Y2FjaGU9IjAiPgogICAgICAgICAgR28gdG8KICAgICAgICAgIDxzdHJvbmcganN0Y2FjaGU9IjAiPgogICAgICAgICAgQXBwbGljYXRpb25zICZndDsgU3lzdGVtIFByZWZlcmVuY2VzICZndDsgTmV0d29yayAmZ3Q7IEFzc2lzdCBtZQogICAgICAgICAgPC9zdHJvbmc+CiAgICAgICAgICB0byB0ZXN0IHlvdXIgY29ubmVjdGlvbi48L3NwYW4+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJzdWdnZXN0aW9ucyIganNzZWxlY3Q9InN1Z2dlc3Rpb25zIiBqc3RjYWNoZT0iNiIganNpbnN0YW5jZT0iKjAiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgIDxkaXYgY2xhc3M9InN1Z2dlc3Rpb24taGVhZGVyIiBqc3ZhbHVlcz0iLmlubmVySFRNTDpoZWFkZXIiIGpzdGNhY2hlPSI5Ij48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic3VnZ2VzdGlvbi1ib2R5IiBqc3ZhbHVlcz0iLmlubmVySFRNTDpib2R5IiBqc3RjYWNoZT0iMTAiPjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlcnJvci1jb2RlIiBqc2NvbnRlbnQ9ImVycm9yQ29kZSIganN0Y2FjaGU9IjciPkVycm9yIGNvZGU6IEVSUl9JTlRFUk5FVF9ESVNDT05ORUNURUQ8L2Rpdj4KICAgPC9kaXY+CiAgPC9kaXY+CiA8L2Rpdj4KPC9kaXY+CjxkaXYgaWQ9InN1Yi1mcmFtZS1lcnJvciIganN0Y2FjaGU9IjAiPgogIDwhLS0gU2hvdyBkZXRhaWxzIHdoZW4gaG92ZXJpbmcgb3ZlciB0aGUgaWNvbiwgaW4gY2FzZSB0aGUgZGV0YWlscyBhcmUKICAgICAgIGhpZGRlbiBiZWNhdXNlIHRoZXkncmUgdG9vIGxhcmdlLiAtLT4KICA8aW1nIGNsYXNzPSJlcnJvci1pbWciIGpzdmFsdWVzPSIudGl0bGU6ZXJyb3JEZXRhaWxzIiBqc3RjYWNoZT0iMSIgdGl0bGU9IlRoZSBJbnRlcm5ldCBjb25uZWN0aW9uIGhhcyBiZWVuIGxvc3QuIj4KICA8ZGl2IGlkPSJzdWItZnJhbWUtZXJyb3ItZGV0YWlscyIganN2YWx1ZXM9Ii5pbm5lckhUTUw6ZXJyb3JEZXRhaWxzIiBqc3RjYWNoZT0iMiI+VGhlIEludGVybmV0IGNvbm5lY3Rpb24gaGFzIGJlZW4gbG9zdC48L2Rpdj4KPC9kaXY+CgoKPHNjcmlwdCBqc3RjYWNoZT0iMCI+Ly8gQ29weXJpZ2h0IChjKSAyMDEwIFRoZSBDaHJvbWl1bSBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLyBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlCi8vIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuCgovKioKICogTk9URTogVGhlIHVzZSBvZiB0aGlzIGZpbGUgaXMgZGVwcmVjYXRlZC4gVXNlIGkxOG5fdGVtcGxhdGUyLmpzIGluc3RlYWQuCiAqCiAqIEBmaWxlb3ZlcnZpZXcgVGhpcyBpcyBhIHNpbXBsZSB0ZW1wbGF0ZSBlbmdpbmUgaW5zcGlyZWQgYnkgSnNUZW1wbGF0ZXMKICogb3B0aW1pemVkIGZvciBpMThuLgogKgogKiBJdCBjdXJyZW50bHkgc3VwcG9ydHMgdHdvIGhhbmRsZXJzOgogKgogKiAgICogaTE4bi1jb250ZW50IHdoaWNoIHNldHMgdGhlIHRleHRDb250ZW50IG9mIHRoZSBlbGVtZW50CiAqCiAqICAgICA8c3BhbiBpMThuLWNvbnRlbnQ9Im15Q29udGVudCI+PC9zcGFuPgogKiAgICAgaTE4blRlbXBsYXRlLnByb2Nlc3MoZWxlbWVudCwgeydteUNvbnRlbnQnOiAnQ29udGVudCd9KTsKICoKICogICAqIGkxOG4tdmFsdWVzIGlzIGEgbGlzdCBvZiBhdHRyaWJ1dGUtdmFsdWUgb3IgcHJvcGVydHktdmFsdWUgcGFpcnMuCiAqICAgICBQcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGEgJy4nIGFuZCBjYW4gY29udGFpbiBuZXN0ZWQgcHJvcGVydGllcy4KICoKICogICAgIDxzcGFuIGkxOG4tdmFsdWVzPSJ0aXRsZTpteVRpdGxlOy5zdHlsZS5mb250U2l6ZTpmb250U2l6ZSI+PC9zcGFuPgogKiAgICAgaTE4blRlbXBsYXRlLnByb2Nlc3MoZWxlbWVudCwgewogKiAgICAgICAnbXlUaXRsZSc6ICdUaXRsZScsCiAqICAgICAgICdmb250U2l6ZSc6ICcxM3B4JwogKiAgICAgfSk7CiAqLwoKdmFyIGkxOG5UZW1wbGF0ZSA9IChmdW5jdGlvbigpIHsKICAvKioKICAgKiBUaGlzIHByb3ZpZGVzIHRoZSBoYW5kbGVycyBmb3IgdGhlIHRlbXBsYXRpbmcgZW5naW5lLiBUaGUga2V5IGlzIHVzZWQgYXMKICAgKiB0aGUgYXR0cmlidXRlIG5hbWUgYW5kIHRoZSB2YWx1ZSBpcyB0aGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkKICAgKiBzaW5nbGUgbm9kZSB0aGF0IGhhcyB0aGlzIGF0dHJpYnV0ZS4KICAgKiBAdHlwZSB7T2JqZWN0fQogICAqLwogIHZhciBoYW5kbGVycyA9IHsKICAgIC8qKgogICAgICogVGhpcyBoYW5kbGVyIHNldHMgdGhlIHRleHRDb250ZW50IG9mIHRoZSBlbGVtZW50LgogICAgICovCiAgICAnaTE4bi1jb250ZW50JzogZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlVmFsdWUsIG9iaikgewogICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gb2JqW2F0dHJpYnV0ZVZhbHVlXTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGlzIGhhbmRsZXIgYWRkcyBvcHRpb25zIHRvIGEgc2VsZWN0IGVsZW1lbnQuCiAgICAgKi8KICAgICdpMThuLW9wdGlvbnMnOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVWYWx1ZSwgb2JqKSB7CiAgICAgIHZhciBvcHRpb25zID0gb2JqW2F0dHJpYnV0ZVZhbHVlXTsKICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlcykgewogICAgICAgIHZhciBvcHRpb24gPSB0eXBlb2YgdmFsdWVzID09ICdzdHJpbmcnID8gbmV3IE9wdGlvbih2YWx1ZXMpIDoKICAgICAgICAgICAgbmV3IE9wdGlvbih2YWx1ZXNbMV0sIHZhbHVlc1swXSk7CiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gc2V0IEhUTUwgYXR0cmlidXRlcyBhbmQgRE9NIHByb3BlcnRpZXMsLiBUaGUgc3ludGF4IGlzOgogICAgICogICBhdHRyaWJ1dGVuYW1lOmtleTsKICAgICAqICAgLmRvbVByb3BlcnR5OmtleTsKICAgICAqICAgLm5lc3RlZC5kb20ucHJvcGVydHk6a2V5CiAgICAgKi8KICAgICdpMThuLXZhbHVlcyc6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZVZhbHVlLCBvYmopIHsKICAgICAgdmFyIHBhcnRzID0gYXR0cmlidXRlVmFsdWUucmVwbGFjZSgvXHMvZywgJycpLnNwbGl0KC87Lyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgICAgICB2YXIgYSA9IHBhcnRzW2pdLm1hdGNoKC9eKFteOl0rKTooLispJC8pOwogICAgICAgIGlmIChhKSB7CiAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBhWzFdOwogICAgICAgICAgdmFyIHByb3BFeHByID0gYVsyXTsKCiAgICAgICAgICAvLyBJZ25vcmUgbWlzc2luZyBwcm9wZXJ0aWVzCiAgICAgICAgICBpZiAocHJvcEV4cHIgaW4gb2JqKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wRXhwcl07CiAgICAgICAgICAgIGlmIChwcm9wTmFtZS5jaGFyQXQoMCkgPT0gJy4nKSB7CiAgICAgICAgICAgICAgdmFyIHBhdGggPSBwcm9wTmFtZS5zbGljZSgxKS5zcGxpdCgnLicpOwogICAgICAgICAgICAgIHZhciBvYmplY3QgPSBlbGVtZW50OwogICAgICAgICAgICAgIHdoaWxlIChvYmplY3QgJiYgcGF0aC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RbcGF0aC5zaGlmdCgpXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG9iamVjdCkgewogICAgICAgICAgICAgICAgb2JqZWN0W3BhdGhdID0gdmFsdWU7CiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHdlIHNldCBpbm5lckhUTUwgKGlnbm9yaW5nIG90aGVycykgd2UgbmVlZCB0bwogICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgY2hlY2sgdGhlIGNvbnRlbnQKICAgICAgICAgICAgICAgIGlmIChwYXRoID09ICdpbm5lckhUTUwnKSB7CiAgICAgICAgICAgICAgICAgIHByb2Nlc3MoZWxlbWVudCwgb2JqKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcE5hbWUsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdpMThuLXZhbHVlczogTWlzc2luZyB2YWx1ZSBmb3IgIicgKyBwcm9wRXhwciArICciJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGF0dHJpYnV0ZU5hbWVzID0gW107CiAgZm9yICh2YXIga2V5IGluIGhhbmRsZXJzKSB7CiAgICBhdHRyaWJ1dGVOYW1lcy5wdXNoKGtleSk7CiAgfQogIHZhciBzZWxlY3RvciA9ICdbJyArIGF0dHJpYnV0ZU5hbWVzLmpvaW4oJ10sWycpICsgJ10nOwoKICAvKioKICAgKiBQcm9jZXNzZXMgYSBET00gdHJlZSB3aXRoIHRoZSB7QGNvZGUgb2JqfSBtYXAuCiAgICovCiAgZnVuY3Rpb24gcHJvY2Vzcyhub2RlLCBvYmopIHsKICAgIHZhciBlbGVtZW50cyA9IG5vZGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICBmb3IgKHZhciBlbGVtZW50LCBpID0gMDsgZWxlbWVudCA9IGVsZW1lbnRzW2ldOyBpKyspIHsKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhdHRyaWJ1dGVOYW1lcy5sZW5ndGg7IGorKykgewogICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlTmFtZXNbal07CiAgICAgICAgdmFyIGF0dCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpOwogICAgICAgIGlmIChhdHQgIT0gbnVsbCkgewogICAgICAgICAgaGFuZGxlcnNbbmFtZV0oZWxlbWVudCwgYXR0LCBvYmopOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIHByb2Nlc3M6IHByb2Nlc3MKICB9Owp9KSgpOwo8L3NjcmlwdD48c2NyaXB0IGpzdGNhY2hlPSIwIj4vLyBDb3B5cmlnaHQgKGMpIDIwMTIgVGhlIENocm9taXVtIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmUKLy8gZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZS4KCihmdW5jdGlvbigpe3ZhciBpPW51bGw7ZnVuY3Rpb24gaygpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbC5hcHBseShBcnJheS5wcm90b3R5cGUuc2xpY2UsYXJndW1lbnRzKX1mdW5jdGlvbiBsKGEsYil7dmFyIGM9ayhhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGIuYXBwbHkoYSxjKX19ZnVuY3Rpb24gbShhLGIpe3ZhciBjPW5ldyBuKGIpO2ZvcihjLmY9W2FdO2MuZi5sZW5ndGg7KXt2YXIgZT1jLGQ9Yy5mLnNoaWZ0KCk7ZS5nKGQpO2ZvcihkPWQuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylkLm5vZGVUeXBlPT0xJiZlLmYucHVzaChkKX19ZnVuY3Rpb24gbihhKXt0aGlzLmc9YX1mdW5jdGlvbiBvKGEpe2Euc3R5bGUuZGlzcGxheT0iIn1mdW5jdGlvbiBwKGEpe2Euc3R5bGUuZGlzcGxheT0ibm9uZSJ9O3ZhciBxPSI6IixyPS9ccyo7XHMqLztmdW5jdGlvbiBzKCl7dGhpcy5pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1zLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuYSl0aGlzLmE9e307aWYoYil7dmFyIGM9dGhpcy5hLGU9Yi5hLGQ7Zm9yKGQgaW4gZSljW2RdPWVbZF19ZWxzZSBmb3IoYyBpbiBkPXRoaXMuYSxlPXQsZSlkW2NdPWVbY107dGhpcy5hLiR0aGlzPWE7dGhpcy5hLiRjb250ZXh0PXRoaXM7dGhpcy5kPXR5cGVvZiBhIT0idW5kZWZpbmVkIiYmYSE9aT9hOiIiO2lmKCFiKXRoaXMuYS4kdG9wPXRoaXMuZH07dmFyIHQ9eyRkZWZhdWx0Oml9LHU9W107ZnVuY3Rpb24gdihhKXtmb3IodmFyIGIgaW4gYS5hKWRlbGV0ZSBhLmFbYl07YS5kPWk7dS5wdXNoKGEpfWZ1bmN0aW9uIHcoYSxiLGMpe3RyeXtyZXR1cm4gYi5jYWxsKGMsYS5hLGEuZCl9Y2F0Y2goZSl7cmV0dXJuIHQuJGRlZmF1bHR9fQpmdW5jdGlvbiB4KGEsYixjLGUpe2lmKHUubGVuZ3RoPjApe3ZhciBkPXUucG9wKCk7cy5jYWxsKGQsYixhKTthPWR9ZWxzZSBhPW5ldyBzKGIsYSk7YS5hLiRpbmRleD1jO2EuYS4kY291bnQ9ZTtyZXR1cm4gYX12YXIgeT0iYV8iLHo9ImJfIixBPSJ3aXRoIChhXykgd2l0aCAoYl8pIHJldHVybiAiLEQ9e307ZnVuY3Rpb24gRShhKXtpZighRFthXSl0cnl7RFthXT1uZXcgRnVuY3Rpb24oeSx6LEErYSl9Y2F0Y2goYil7fXJldHVybiBEW2FdfWZ1bmN0aW9uIEYoYSl7Zm9yKHZhciBiPVtdLGE9YS5zcGxpdChyKSxjPTAsZT1hLmxlbmd0aDtjPGU7KytjKXt2YXIgZD1hW2NdLmluZGV4T2YocSk7aWYoIShkPDApKXt2YXIgZjtmPWFbY10uc3Vic3RyKDAsZCkucmVwbGFjZSgvXlxzKy8sIiIpLnJlcGxhY2UoL1xzKyQvLCIiKTtkPUUoYVtjXS5zdWJzdHIoZCsxKSk7Yi5wdXNoKGYsZCl9fXJldHVybiBifTt2YXIgRz0ianNpbnN0YW5jZSIsSD0ianN0cyIsST0iKiIsSj0iZGl2IixLPSJpZCI7ZnVuY3Rpb24gTCgpe312YXIgTT0wLE49ezA6e319LFA9e30sUT17fSxSPVtdO2Z1bmN0aW9uIFMoYSl7YS5fX2pzdGNhY2hlfHxtKGEsZnVuY3Rpb24oYSl7VChhKX0pfXZhciBVPVtbImpzc2VsZWN0IixFXSxbImpzZGlzcGxheSIsRV0sWyJqc3ZhbHVlcyIsRl0sWyJqc3ZhcnMiLEZdLFsianNldmFsIixmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYT1hLnNwbGl0KHIpLGM9MCxlPWEubGVuZ3RoO2M8ZTsrK2MpaWYoYVtjXSl7dmFyIGQ9RShhW2NdKTtiLnB1c2goZCl9cmV0dXJuIGJ9XSxbInRyYW5zY2x1ZGUiLGZ1bmN0aW9uKGEpe3JldHVybiBhfV0sWyJqc2NvbnRlbnQiLEVdLFsianNza2lwIixFXV07CmZ1bmN0aW9uIFQoYSl7aWYoYS5fX2pzdGNhY2hlKXJldHVybiBhLl9fanN0Y2FjaGU7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImpzdGNhY2hlIik7aWYoYiE9aSlyZXR1cm4gYS5fX2pzdGNhY2hlPU5bYl07Zm9yKHZhciBiPVIubGVuZ3RoPTAsYz1VLmxlbmd0aDtiPGM7KytiKXt2YXIgZT1VW2JdWzBdLGQ9YS5nZXRBdHRyaWJ1dGUoZSk7UVtlXT1kO2QhPWkmJlIucHVzaChlKyI9IitkKX1pZihSLmxlbmd0aD09MClyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoImpzdGNhY2hlIiwiMCIpLGEuX19qc3RjYWNoZT1OWzBdO3ZhciBmPVIuam9pbigiJiIpO2lmKGI9UFtmXSlyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoImpzdGNhY2hlIixiKSxhLl9fanN0Y2FjaGU9TltiXTtmb3IodmFyIGg9e30sYj0wLGM9VS5sZW5ndGg7YjxjOysrYil7dmFyIGQ9VVtiXSxlPWRbMF0sZz1kWzFdLGQ9UVtlXTtkIT1pJiYoaFtlXT1nKGQpKX1iPSIiKyArK007YS5zZXRBdHRyaWJ1dGUoImpzdGNhY2hlIixiKTtOW2JdPQpoO1BbZl09YjtyZXR1cm4gYS5fX2pzdGNhY2hlPWh9ZnVuY3Rpb24gVihhLGIpe2EuaC5wdXNoKGIpO2Euay5wdXNoKDApfWZ1bmN0aW9uIFcoYSl7cmV0dXJuIGEuYy5sZW5ndGg/YS5jLnBvcCgpOltdfQpMLnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEsYil7dmFyIGM9WChiKSxlPWMudHJhbnNjbHVkZTtpZihlKShjPVkoZSkpPyhiLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGMsYiksZT1XKHRoaXMpLGUucHVzaCh0aGlzLmUsYSxjKSxWKHRoaXMsZSkpOmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTtlbHNlIGlmKGM9Yy5qc3NlbGVjdCl7dmFyIGM9dyhhLGMsYiksZD1iLmdldEF0dHJpYnV0ZShHKSxmPSExO2QmJihkLmNoYXJBdCgwKT09ST8oZD1wYXJzZUludChkLnN1YnN0cigxKSwxMCksZj0hMCk6ZD1wYXJzZUludChkLDEwKSk7dmFyIGg9YyE9aSYmdHlwZW9mIGM9PSJvYmplY3QiJiZ0eXBlb2YgYy5sZW5ndGg9PSJudW1iZXIiLGU9aD9jLmxlbmd0aDoxLGc9aCYmZT09MDtpZihoKWlmKGcpZD9iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik6KGIuc2V0QXR0cmlidXRlKEcsIiowIikscChiKSk7ZWxzZSBpZihvKGIpLGQ9PT1pfHxkPT09IiJ8fGYmJmQ8ZS0xKXtmPVcodGhpcyk7CmQ9ZHx8MDtmb3IoaD1lLTE7ZDxoOysrZCl7dmFyIGo9Yi5jbG9uZU5vZGUoITApO2IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixiKTtaKGosYyxkKTtnPXgoYSxjW2RdLGQsZSk7Zi5wdXNoKHRoaXMuYixnLGosdixnLGkpfVooYixjLGQpO2c9eChhLGNbZF0sZCxlKTtmLnB1c2godGhpcy5iLGcsYix2LGcsaSk7Vih0aGlzLGYpfWVsc2UgZDxlPyhmPWNbZF0sWihiLGMsZCksZz14KGEsZixkLGUpLGY9Vyh0aGlzKSxmLnB1c2godGhpcy5iLGcsYix2LGcsaSksVih0aGlzLGYpKTpiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7ZWxzZSBjPT1pP3AoYik6KG8oYiksZz14KGEsYywwLDEpLGY9Vyh0aGlzKSxmLnB1c2godGhpcy5iLGcsYix2LGcsaSksVih0aGlzLGYpKX1lbHNlIHRoaXMuYihhLGIpfTsKTC5wcm90b3R5cGUuYj1mdW5jdGlvbihhLGIpe3ZhciBjPVgoYiksZT1jLmpzZGlzcGxheTtpZihlKXtpZighdyhhLGUsYikpe3AoYik7cmV0dXJufW8oYil9aWYoZT1jLmpzdmFycylmb3IodmFyIGQ9MCxmPWUubGVuZ3RoO2Q8ZjtkKz0yKXt2YXIgaD1lW2RdLGc9dyhhLGVbZCsxXSxiKTthLmFbaF09Z31pZihlPWMuanN2YWx1ZXMpe2Q9MDtmb3IoZj1lLmxlbmd0aDtkPGY7ZCs9MilpZihnPWVbZF0saD13KGEsZVtkKzFdLGIpLGcuY2hhckF0KDApPT0iJCIpYS5hW2ddPWg7ZWxzZSBpZihnLmNoYXJBdCgwKT09Ii4iKXtmb3IodmFyIGc9Zy5zdWJzdHIoMSkuc3BsaXQoIi4iKSxqPWIsTz1nLmxlbmd0aCxCPTAsJD1PLTE7QjwkOysrQil7dmFyIEM9Z1tCXTtqW0NdfHwoaltDXT17fSk7aj1qW0NdfWpbZ1tPLTFdXT1ofWVsc2UgZyYmKHR5cGVvZiBoPT0iYm9vbGVhbiI/aD9iLnNldEF0dHJpYnV0ZShnLGcpOmIucmVtb3ZlQXR0cmlidXRlKGcpOmIuc2V0QXR0cmlidXRlKGcsIiIrCmgpKX1pZihlPWMuanNldmFsKXtkPTA7Zm9yKGY9ZS5sZW5ndGg7ZDxmOysrZCl3KGEsZVtkXSxiKX1lPWMuanNza2lwO2lmKCFlfHwhdyhhLGUsYikpaWYoYz1jLmpzY29udGVudCl7aWYoYz0iIit3KGEsYyxiKSxiLmlubmVySFRNTCE9Yyl7Zm9yKDtiLmZpcnN0Q2hpbGQ7KWU9Yi5maXJzdENoaWxkLGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTtiLmFwcGVuZENoaWxkKHRoaXMuai5jcmVhdGVUZXh0Tm9kZShjKSl9fWVsc2V7Yz1XKHRoaXMpO2ZvcihlPWIuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyllLm5vZGVUeXBlPT0xJiZjLnB1c2godGhpcy5lLGEsZSk7Yy5sZW5ndGgmJlYodGhpcyxjKX19O2Z1bmN0aW9uIFgoYSl7aWYoYS5fX2pzdGNhY2hlKXJldHVybiBhLl9fanN0Y2FjaGU7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImpzdGNhY2hlIik7aWYoYilyZXR1cm4gYS5fX2pzdGNhY2hlPU5bYl07cmV0dXJuIFQoYSl9CmZ1bmN0aW9uIFkoYSxiKXt2YXIgYz1kb2N1bWVudDtpZihiKXt2YXIgZT1jLmdldEVsZW1lbnRCeUlkKGEpO2lmKCFlKXt2YXIgZT1iKCksZD1ILGY9Yy5nZXRFbGVtZW50QnlJZChkKTtpZighZilmPWMuY3JlYXRlRWxlbWVudChKKSxmLmlkPWQscChmKSxmLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsYy5ib2R5LmFwcGVuZENoaWxkKGYpO2Q9Yy5jcmVhdGVFbGVtZW50KEopO2YuYXBwZW5kQ2hpbGQoZCk7ZC5pbm5lckhUTUw9ZTtlPWMuZ2V0RWxlbWVudEJ5SWQoYSl9Yz1lfWVsc2UgYz1jLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjPyhTKGMpLGM9Yy5jbG9uZU5vZGUoITApLGMucmVtb3ZlQXR0cmlidXRlKEspLGMpOml9ZnVuY3Rpb24gWihhLGIsYyl7Yz09Yi5sZW5ndGgtMT9hLnNldEF0dHJpYnV0ZShHLEkrYyk6YS5zZXRBdHRyaWJ1dGUoRywiIitjKX07d2luZG93LmpzdEdldFRlbXBsYXRlPVk7d2luZG93LkpzRXZhbENvbnRleHQ9czt3aW5kb3cuanN0UHJvY2Vzcz1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBMO1MoYik7Yy5qPWI/Yi5ub2RlVHlwZT09OT9iOmIub3duZXJEb2N1bWVudHx8ZG9jdW1lbnQ6ZG9jdW1lbnQ7dmFyIGU9bChjLGMuZSxhLGIpLGQ9Yy5oPVtdLGY9Yy5rPVtdO2MuYz1bXTtlKCk7Zm9yKHZhciBoLGcsajtkLmxlbmd0aDspaD1kW2QubGVuZ3RoLTFdLGU9ZltmLmxlbmd0aC0xXSxlPj1oLmxlbmd0aD8oZT1jLGc9ZC5wb3AoKSxnLmxlbmd0aD0wLGUuYy5wdXNoKGcpLGYucG9wKCkpOihnPWhbZSsrXSxqPWhbZSsrXSxoPWhbZSsrXSxmW2YubGVuZ3RoLTFdPWUsZy5jYWxsKGMsaixoKSl9Owp9KSgpCjwvc2NyaXB0PjxzY3JpcHQganN0Y2FjaGU9IjAiPnZhciB0ZW1wbGF0ZURhdGEgPSB7ImVycm9yQ29kZSI6IkVycm9yIGNvZGU6IEVSUl9JTlRFUk5FVF9ESVNDT05ORUNURUQiLCJlcnJvckRldGFpbHMiOiJUaGUgSW50ZXJuZXQgY29ubmVjdGlvbiBoYXMgYmVlbiBsb3N0LiIsImhlYWRpbmciOiJVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgSW50ZXJuZXQiLCJsZXNzIjoiTGVzcyIsIm1vcmUiOiJNb3JlIiwic3VnZ2VzdGlvbnMiOltdLCJzdW1tYXJ5Ijp7ImZhaWxlZFVybCI6Imh0dHA6Ly93aGF0LmNvbS8iLCJob3N0TmFtZSI6IndoYXQuY29tIiwibXNnIjoiXHUwMDNDc3BhbiBqc2NvbnRlbnQ9XCJwcm9kdWN0TmFtZVwiXHUwMDNFXHUwMDNDL3NwYW5cdTAwM0VcbiAgICAgICAgICBjYW4ndCBkaXNwbGF5IHRoZSB3ZWJwYWdlIGJlY2F1c2UgeW91ciBjb21wdXRlciBpc24ndCBjb25uZWN0ZWQgdG8gdGhlIEludGVybmV0LlxuICAgICAgICAgIFx1MDAzQ2JyIC9cdTAwM0VcdTAwM0NiciAvXHUwMDNFXG4gICAgICAgICAgWW91IGNhbiB0cnkgdG8gZGlhZ25vc2UgdGhlIHByb2JsZW0gYnkgdGFraW5nIHRoZSBmb2xsb3dpbmcgc3RlcHM6XG4gICAgICAgICAgXHUwMDNDYnIgL1x1MDAzRVx1MDAzQ2JyIC9cdTAwM0VcbiAgICAgICAgICBHbyB0b1xuICAgICAgICAgIFx1MDAzQ3N0cm9uZ1x1MDAzRVxuICAgICAgICAgIEFwcGxpY2F0aW9ucyBcdTAwM0UgU3lzdGVtIFByZWZlcmVuY2VzIFx1MDAzRSBOZXR3b3JrIFx1MDAzRSBBc3Npc3QgbWVcbiAgICAgICAgICBcdTAwM0Mvc3Ryb25nXHUwMDNFXG4gICAgICAgICAgdG8gdGVzdCB5b3VyIGNvbm5lY3Rpb24uIiwicHJvZHVjdE5hbWUiOiJHb29nbGUgQ2hyb21lIn0sInRleHRkaXJlY3Rpb24iOiJsdHIiLCJ0aXRsZSI6Imh0dHA6Ly93aGF0LmNvbS8gaXMgbm90IGF2YWlsYWJsZSJ9Ozwvc2NyaXB0PjxzY3JpcHQganN0Y2FjaGU9IjAiPi8vIENvcHlyaWdodCAoYykgMjAxMCBUaGUgQ2hyb21pdW0gQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KLy8gVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZQovLyBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlLgoKLy8gSW52b2tlIHRoZSB0ZW1wbGF0ZSBlbmdpbmUgcHJldmlvdXNseSBsb2FkZWQgZnJvbSBpMThuX3RlbXBsYXRlLmpzCmkxOG5UZW1wbGF0ZS5wcm9jZXNzKGRvY3VtZW50LCB0ZW1wbGF0ZURhdGEpOwo8L3NjcmlwdD48c2NyaXB0IGpzdGNhY2hlPSIwIj52YXIgdHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndCcpO2pzdFByb2Nlc3MobmV3IEpzRXZhbENvbnRleHQodGVtcGxhdGVEYXRhKSwgdHApOzwvc2NyaXB0PjwvYm9keT48L2h0bWw+Cg=="

firefox = "PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIGhhc0Jyb3dzZXJIYW5kbGVycz0idHJ1ZSI+CiAgPGhlYWQ+CiAgICA8dGl0bGU+UHJvYmxlbSBsb2FkaW5nIHBhZ2U8L3RpdGxlPgogICAgPHN0eWxlPgogICAgLyoKICogIFRoaXMgZGVmaW5lcyB0aGUgbG9vay1hbmQtZmVlbCBzdHlsaW5nIG9mIHRoZSBlcnJvciBwYWdlcy4KICogIChzZWU6IG5ldEVycm9yLnhodG1sKQogKgogKiAgT3JpZ2luYWwgc3R5bGluZyBieSBXaWxsaWFtIFByaWNlIDxidWd6aWxsYUBtb2IucmljZS5lZHU+CiAqICBVcGRhdGVkIGZvciBtb2JpbGUgYnk6IFdlcyBKb2huc3RvbiA8d2pvaG5zdG9uQG1vemlsbGEuY29tPgogKi8KCmJvZHkgewogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwIDhweCA4cHg7CiAgZm9udC1mYW1pbHk6ICJOb2tpYSBTYW5zIiwgVGFob21hLCBzYW5zLXNlcmlmICFpbXBvcnRhbnQ7Cn0KCmgxIHsKICBmb250LXNpemU6IDIycHg7Cn0KCmgyIHsKICBmb250LXNpemU6IDE2cHg7Cn0KCnVsIHsKICBtYXJnaW46IDBweDsKICBwYWRkaW5nOiAwcHggMHB4IDBweCAxZW07Cn0KCmxpIHsKICBtYXJnaW46IDBweDsKICBwYWRkaW5nOiA4cHggMHB4Owp9CgojZXJyb3JQYWdlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0VFNkY0Owp9CgojZXJyb3JQYWdlLmNlcnRlcnJvciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0VGRDQwMDsKfQoKI2Vycm9yUGFnZS5ibG9ja2Vkc2l0ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI0JGMDAwMDsKfQoKI2Vycm9yVGl0bGUgewogIGJhY2tncm91bmQ6IHVybCgiY2hyb21lOi8vYnJvd3Nlci9za2luL2ltYWdlcy9lcnJvcnBhZ2Utd2FybmluZy5wbmciKSBsZWZ0IGNlbnRlciBuby1yZXBlYXQ7CiAgLyogU2NhbGVkIGJ5IC42NjYgb2YgdGhlaXIgYWN0dWFsIHNpemUgKi8KICBiYWNrZ3JvdW5kLXNpemU6IDQwcHggNDBweDsKICBiYWNrZ3JvdW5kLW9yaWdpbjogY29udGVudC1ib3g7CiAgbWluLWhlaWdodDogNjBweDsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBtYXJnaW4tcmlnaHQ6IGF1dG87CiAgbWF4LXdpZHRoOiA1MDBweDsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBtYXJnaW4tcmlnaHQ6IGF1dG87Cn0KCiNlcnJvclBhZ2UuY2VydGVycm9yICNlcnJvclRpdGxlIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImNocm9tZTovL2Jyb3dzZXIvc2tpbi9pbWFnZXMvZXJyb3JwYWdlLWxhcnJ5LWJsYWNrLnBuZyIpOwp9CgojZXJyb3JQYWdlLmJsb2NrZWRzaXRlICNlcnJvclRpdGxlIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImNocm9tZTovL2Jyb3dzZXIvc2tpbi9pbWFnZXMvZXJyb3JwYWdlLWxhcnJ5LXdoaXRlLnBuZyIpOwogIGNvbG9yOiB3aGl0ZTsKfQoKLmVycm9yVGl0bGVUZXh0IHsKICBwYWRkaW5nOiAwcHggMHB4IDBweCA1MHB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlCn0KCiNlcnJvclBhZ2VDb250YWluZXIgewogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogIGJvcmRlcjogMXB4IHNvbGlkICM5OTk5OTk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIHBhZGRpbmc6IDZweCAyMHB4IDIwcHg7CiAgZm9udC1zaXplOiAxNHB4OwogIG1heC13aWR0aDogNTAwcHg7CiAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgbWFyZ2luLXJpZ2h0OiBhdXRvOwp9CgojZXJyb3JTaG9ydERlc2MgPiBwOmVtcHR5IHsKICBkaXNwbGF5OiBub25lOwp9CgojZXJyb3JTaG9ydERlc2MgPiBwIHsKICBvdmVyZmxvdzogYXV0bzsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzk5OTk5OTsKICBwYWRkaW5nLWJvdHRvbTogMWVtOwp9CgojZXJyb3JQYWdlLmJsb2NrZWRzaXRlICNlcnJvclNob3J0RGVzYyA+IHAgewogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGJvcmRlci1ib3R0b206IG5vbmU7CiAgcGFkZGluZy1ib3R0b206IDBweDsKfQoKI3NlY3VyaXR5T3ZlcnJpZGVEaXYgewogIHBhZGRpbmctdG9wOiAxMHB4Owp9CgpkaXZbY29sbGFwc2VkXSB7CiAgcGFkZGluZy1sZWZ0OiAxNXB4OwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiY2hyb21lOi8vYnJvd3Nlci9za2luL2ltYWdlcy9hcnJvd3JpZ2h0LTE2LnBuZyIpOwogIGJhY2tncm91bmQtc2l6ZTogMTFweCAxMXB4OwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogbGVmdCAwLjNlbTsKfQoKZGl2W2NvbGxhcHNlZD0idHJ1ZSJdIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImNocm9tZTovL2Jyb3dzZXIvc2tpbi9pbWFnZXMvYXJyb3dyaWdodC0xNi5wbmciKTsKfQoKZGl2W2NvbGxhcHNlZD0iZmFsc2UiXSB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJjaHJvbWU6Ly9icm93c2VyL3NraW4vaW1hZ2VzL2Fycm93ZG93bi0xNi5wbmciKTsKfQoKZGl2W2NvbGxhcHNlZD0idHJ1ZSJdID4gcCwKZGl2W2NvbGxhcHNlZD0idHJ1ZSJdID4gZGl2IHsKICBkaXNwbGF5OiBub25lOwp9CgpidXR0b24gewogIHBhZGRpbmc6IDAuM2VtICFpbXBvcnRhbnQ7Cn0KPC9zdHlsZT4KICAgIDwhLS0gSWYgdGhlIGxvY2F0aW9uIG9mIHRoZSBmYXZpY29uIGlzIGNoYW5nZWQgaGVyZSwgdGhlIEZBVklDT05fRVJST1JQQUdFX1VSTCBzeW1ib2wgaW4KICAgICAgICB0b29sa2l0L2NvbXBvbmVudHMvcGxhY2VzL3NyYy9uc0Zhdmljb25TZXJ2aWNlLmggc2hvdWxkIGJlIHVwZGF0ZWQuIC0tPgogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIGlkPSJmYXZpY29uIiBocmVmPSJjaHJvbWU6Ly9nbG9iYWwvc2tpbi9pY29ucy93YXJuaW5nLTE2LnBuZyIgLz4KCiAgICA8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPjwhW0NEQVRBWwogICAgICAvLyBFcnJvciB1cmwgTVVTVCBiZSBmb3JtYXR0ZWQgbGlrZSB0aGlzOgogICAgICAvLyAgbW96LW5ldGVycm9yOnBhZ2U/ZT1lcnJvciZ1PXVybCZkPWRlc2MKICAgICAgLy8KICAgICAgLy8gb3Igb3B0aW9uYWxseSwgdG8gc3BlY2lmeSBhbiBhbHRlcm5hdGUgQ1NTIGNsYXNzIHRvIGFsbG93IGZvcgogICAgICAvLyBjdXN0b20gc3R5bGluZyBhbmQgZmF2aWNvbjoKICAgICAgLy8KICAgICAgLy8gIG1vei1uZXRlcnJvcjpwYWdlP2U9ZXJyb3ImdT11cmwmcz1jbGFzc25hbWUmZD1kZXNjCgogICAgICAvLyBOb3RlIHRoYXQgdGhpcyBmaWxlIHVzZXMgZG9jdW1lbnQuZG9jdW1lbnRVUkkgdG8gZ2V0CiAgICAgIC8vIHRoZSBVUkwgKHdpdGggdGhlIGZvcm1hdCBmcm9tIGFib3ZlKS4gVGhpcyBpcyBiZWNhdXNlCiAgICAgIC8vIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgZ2V0cyB0aGUgY3VycmVudCBVUkkgb2ZmIHRoZSBkb2NzaGVsbCwKICAgICAgLy8gd2hpY2ggaXMgdGhlIFVSTCBkaXNwbGF5ZWQgaW4gdGhlIGxvY2F0aW9uIGJhciwgaS5lLgogICAgICAvLyB0aGUgVVJJIHRoYXQgdGhlIHVzZXIgYXR0ZW1wdGVkIHRvIGxvYWQuCgogICAgICBmdW5jdGlvbiBnZXRFcnJvckNvZGUoKQogICAgICB7CiAgICAgICAgdmFyIHVybCA9IGRvY3VtZW50LmRvY3VtZW50VVJJOwogICAgICAgIHZhciBlcnJvciA9IHVybC5zZWFyY2goL2VcPS8pOwogICAgICAgIHZhciBkdWZmVXJsID0gdXJsLnNlYXJjaCgvXCZ1XD0vKTsKICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHVybC5zbGljZShlcnJvciArIDIsIGR1ZmZVcmwpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0Q1NTQ2xhc3MoKQogICAgICB7CiAgICAgICAgdmFyIHVybCA9IGRvY3VtZW50LmRvY3VtZW50VVJJOwogICAgICAgIHZhciBtYXRjaGVzID0gdXJsLm1hdGNoKC9zXD0oW14mXSspXCYvKTsKICAgICAgICAvLyBzIGlzIG9wdGlvbmFsLCBpZiBubyBtYXRjaCBqdXN0IHJldHVybiBub3RoaW5nCiAgICAgICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMubGVuZ3RoIDwgMikKICAgICAgICAgIHJldHVybiAiIjsKCiAgICAgICAgLy8gcGFyZW50aGV0aWNhbCBtYXRjaCBpcyB0aGUgc2Vjb25kIGVudHJ5CiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChtYXRjaGVzWzFdKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24oKQogICAgICB7CiAgICAgICAgdmFyIHVybCA9IGRvY3VtZW50LmRvY3VtZW50VVJJOwogICAgICAgIHZhciBkZXNjID0gdXJsLnNlYXJjaCgvZFw9Lyk7CgogICAgICAgIC8vIGRlc2MgPT0gLTEgaWYgbm90IGZvdW5kOyBpZiBzbywgcmV0dXJuIGFuIGVtcHR5IHN0cmluZwogICAgICAgIC8vIGluc3RlYWQgb2Ygd2hhdCB3b3VsZCB0dXJuIG91dCB0byBiZSBwb3J0aW9ucyBvZiB0aGUgVVJJCiAgICAgICAgaWYgKGRlc2MgPT0gLTEpCiAgICAgICAgICByZXR1cm4gIiI7CgogICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodXJsLnNsaWNlKGRlc2MgKyAyKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHJldHJ5VGhpcyhidXR0b25FbCkKICAgICAgewogICAgICAgIC8vIE5vdGU6IFRoZSBhcHBsaWNhdGlvbiBtYXkgd2lzaCB0byBoYW5kbGUgc3dpdGNoaW5nIG9mZiAib2ZmbGluZSBtb2RlIgogICAgICAgIC8vIGJlZm9yZSB0aGlzIGV2ZW50IGhhbmRsZXIgcnVucywgYnV0IHVzaW5nIGEgY2FwdHVyaW5nIGV2ZW50IGhhbmRsZXIuCgogICAgICAgIC8vIFNlc3Npb24gaGlzdG9yeSBoYXMgdGhlIFVSTCBvZiB0aGUgcGFnZSB0aGF0IGZhaWxlZAogICAgICAgIC8vIHRvIGxvYWQsIG5vdCB0aGUgb25lIG9mIHRoZSBlcnJvciBwYWdlLiBTbywganVzdCBjYWxsCiAgICAgICAgLy8gcmVsb2FkKCksIHdoaWNoIHdpbGwgYWxzbyByZXBvc3QgUE9TVCBkYXRhIGNvcnJlY3RseS4KICAgICAgICB0cnkgewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8gV2UgcHJvYmFibHkgdHJpZWQgdG8gcmVsb2FkIGEgVVJJIHRoYXQgY2F1c2VkIGFuIGV4Y2VwdGlvbiB0bwogICAgICAgICAgLy8gb2NjdXI7ICBlLmcuIGEgbm9uZXhpc3RlbnQgZmlsZS4KICAgICAgICB9CgogICAgICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaW5pdFBhZ2UoKQogICAgICB7CiAgICAgICAgdmFyIGVyciA9IGdldEVycm9yQ29kZSgpOwoKICAgICAgICAvLyBpZiBpdCdzIGFuIHVua25vd24gZXJyb3Igb3IgdGhlcmUncyBubyB0aXRsZSBvciBkZXNjcmlwdGlvbgogICAgICAgIC8vIGRlZmluZWQsIGdldCB0aGUgZ2VuZXJpYyBtZXNzYWdlCiAgICAgICAgdmFyIGVyclRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV0XyIgKyBlcnIpOwogICAgICAgIHZhciBlcnJEZXNjICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlZF8iICsgZXJyKTsKICAgICAgICBpZiAoIWVyclRpdGxlIHx8ICFlcnJEZXNjKQogICAgICAgIHsKICAgICAgICAgIGVyclRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV0X2dlbmVyaWMiKTsKICAgICAgICAgIGVyckRlc2MgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkX2dlbmVyaWMiKTsKICAgICAgICB9CgogICAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvclRpdGxlVGV4dCIpOwogICAgICAgIGlmICh0aXRsZSkKICAgICAgICB7CiAgICAgICAgICB0aXRsZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlcnJUaXRsZSwgdGl0bGUpOwogICAgICAgICAgLy8gY2hhbmdlIGlkIHRvIHRoZSByZXBsYWNlZCBjaGlsZCdzIGlkIHNvIHN0eWxpbmcgd29ya3MKICAgICAgICAgIGVyclRpdGxlLmlkID0gImVycm9yVGl0bGVUZXh0IjsKICAgICAgICB9CgogICAgICAgIHZhciBzZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvclNob3J0RGVzY1RleHQiKTsKICAgICAgICBpZiAoc2QpCiAgICAgICAgICBzZC50ZXh0Q29udGVudCA9IGdldERlc2NyaXB0aW9uKCk7CgogICAgICAgIHZhciBsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvckxvbmdEZXNjIik7CiAgICAgICAgaWYgKGxkKQogICAgICAgIHsKICAgICAgICAgIGxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGVyckRlc2MsIGxkKTsKICAgICAgICAgIC8vIGNoYW5nZSBpZCB0byB0aGUgcmVwbGFjZWQgY2hpbGQncyBpZCBzbyBzdHlsaW5nIHdvcmtzCiAgICAgICAgICBlcnJEZXNjLmlkID0gImVycm9yTG9uZ0Rlc2MiOwogICAgICAgIH0KCiAgICAgICAgLy8gcmVtb3ZlIHVuZGlzcGxheWVkIGVycm9ycyB0byBhdm9pZCBidWcgMzkwOTgKICAgICAgICB2YXIgZXJyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yQ29udGFpbmVyIik7CiAgICAgICAgZXJyQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXJyQ29udGFpbmVyKTsKCiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGdldENTU0NsYXNzKCk7CiAgICAgICAgaWYgKGNsYXNzTmFtZSAmJiBjbGFzc05hbWUgIT0gImV4cGVydEJhZENlcnQiKSB7CiAgICAgICAgICAvLyBBc3NvY2lhdGUgYSBDU1MgY2xhc3Mgd2l0aCB0aGUgcm9vdCBvZiB0aGUgcGFnZSwgaWYgb25lIHdhcyBwYXNzZWQgaW4sCiAgICAgICAgICAvLyB0byBhbGxvdyBjdXN0b20gc3R5bGluZy4KICAgICAgICAgIC8vIE5vdCAiZXhwZXJ0QmFkQ2VydCIgdGhvdWdoLCBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCB0aGUgZmF2aWNvbgogICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKCiAgICAgICAgICAvLyBBbHNvLCBpZiB0aGV5IHNwZWNpZmllZCBhIENTUyBjbGFzcywgdGhleSBtdXN0IHN1cHBseSB0aGVpciBvd24KICAgICAgICAgIC8vIGZhdmljb24uICBJbiBvcmRlciB0byB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIHJlcGFpbnQgdGhvdWdoLCB3ZQogICAgICAgICAgLy8gbmVlZCB0byByZW1vdmUvYWRkIHRoZSBsaW5rIGVsZW1lbnQuCiAgICAgICAgICB2YXIgZmF2aWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmYXZpY29uIik7CiAgICAgICAgICB2YXIgZmF2aWNvblBhcmVudCA9IGZhdmljb24ucGFyZW50Tm9kZTsKICAgICAgICAgIGZhdmljb25QYXJlbnQucmVtb3ZlQ2hpbGQoZmF2aWNvbik7CiAgICAgICAgICBmYXZpY29uLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJjaHJvbWU6Ly9nbG9iYWwvc2tpbi9pY29ucy8iICsgY2xhc3NOYW1lICsgIl9mYXZpY29uLnBuZyIpOwogICAgICAgICAgZmF2aWNvblBhcmVudC5hcHBlbmRDaGlsZChmYXZpY29uKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSAiZXhwZXJ0QmFkQ2VydCIpIHsKICAgICAgICAgIHNob3dTZWN1cml0eVNlY3Rpb24oKTsKICAgICAgICB9CgogICAgICAgIGlmIChlcnIgPT0gInJlbW90ZVhVTCIpIHsKICAgICAgICAgIC8vIFJlbW92ZSB0aGUgIlRyeSBhZ2FpbiIgYnV0dG9uIGZvciByZW1vdGUgWFVMIGVycm9ycyBnaXZlbiB0aGF0CiAgICAgICAgICAvLyBpdCBpcyB1c2VsZXNzLgogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yVHJ5QWdhaW4iKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyciA9PSAiY3NwRnJhbWVBbmNlc3RvckJsb2NrZWQiKSB7CiAgICAgICAgICAvLyBSZW1vdmUgdGhlICJUcnkgYWdhaW4iIGJ1dHRvbiBmb3IgQ1NQIGZyYW1lIGFuY2VzdG9ycyB2aW9sYXRpb24sIHNpbmNlIGl0J3MKICAgICAgICAgIC8vIGFsbW9zdCBjZXJ0YWlubHkgdXNlbGVzcy4gKEJ1ZyA1NTMxODApCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3JUcnlBZ2FpbiIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfQoKICAgICAgICBpZiAoZXJyID09ICJuc3NCYWRDZXJ0IikgewogICAgICAgICAgLy8gUmVtb3ZlIHRoZSAiVHJ5IGFnYWluIiBidXR0b24gZm9yIHNlY3VyaXR5IGV4Y2VwdGlvbnMsIHNpbmNlIGl0J3MKICAgICAgICAgIC8vIGFsbW9zdCBjZXJ0YWlubHkgdXNlbGVzcy4KICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvclRyeUFnYWluIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvclBhZ2VDb250YWluZXIiKS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNlcnRlcnJvciIpOwogICAgICAgICAgYWRkRG9tYWluRXJyb3JMaW5rKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgLy8gUmVtb3ZlIHRoZSBvdmVycmlkZSBibG9jayBmb3Igbm9uLWNlcnRpZmljYXRlIGVycm9ycy4gIENTUy1oaWRpbmcKICAgICAgICAgIC8vIGlzbid0IGdvb2QgZW5vdWdoIGhlcmUsIGJlY2F1c2Ugb2YgYnVnIDM5MDk4CiAgICAgICAgICB2YXIgc2VjT3ZlcnJpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VjdXJpdHlPdmVycmlkZURpdiIpOwogICAgICAgICAgc2VjT3ZlcnJpZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWNPdmVycmlkZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzaG93U2VjdXJpdHlTZWN0aW9uKCkgewogICAgICAgIC8vIFN3YXAgbGluayBvdXQsIGNvbnRlbnQgaW4KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlPdmVycmlkZUNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5T3ZlcnJpZGVMaW5rJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQoKICAgICAgLyogSW4gdGhlIGNhc2Ugb2YgU1NMIGVycm9yIHBhZ2VzIGFib3V0IGRvbWFpbiBtaXNtYXRjaCwgc2VlIGlmCiAgICAgICAgd2UgY2FuIGh5cGVybGluayB0aGUgdXNlciB0byB0aGUgY29ycmVjdCBzaXRlLiAgV2UgZG9uJ3Qgd2FudAogICAgICAgIHRvIGRvIHRoaXMgZ2VuZXJpY2FsbHkgc2luY2UgaXQgYWxsb3dzIE1pdE0gYXR0YWNrcyB0byByZWRpcmVjdAogICAgICAgIHVzZXJzIHRvIGEgc2l0ZSB1bmRlciBhdHRhY2tlciBjb250cm9sLCBidXQgaW4gY2VydGFpbiBjYXNlcwogICAgICAgIGl0IGlzIHNhZmUgKGFuZCBoZWxwZnVsISkgdG8gZG8gc28uICBCdWcgNDAyMjEwCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIGFkZERvbWFpbkVycm9yTGluaygpIHsKICAgICAgICAvLyBSYXRoZXIgdGhhbiB0ZXh0Q29udGVudCwgd2UgbmVlZCB0byB0cmVhdCBkZXNjcmlwdGlvbiBhcyBIVE1MCiAgICAgICAgdmFyIHNkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yU2hvcnREZXNjVGV4dCIpOwogICAgICAgIGlmIChzZCkgewogICAgICAgICAgdmFyIGRlc2MgPSBnZXREZXNjcmlwdGlvbigpOwoKICAgICAgICAgIC8vIHNhbml0aXplIGRlc2NyaXB0aW9uIHRleHQgLSBzZWUgYnVnIDQ0MTE2OQoKICAgICAgICAgIC8vIEZpcnN0LCBmaW5kIHRoZSBpbmRleCBvZiB0aGUgPGE+IHRhZyB3ZSBjYXJlIGFib3V0LCBiZWluZyBjYXJlZnVsIG5vdCB0bwogICAgICAgICAgLy8gdXNlIGFuIG92ZXItZ3JlZWR5IHJlZ2V4CiAgICAgICAgICB2YXIgcmUgPSAvPGEgaWQ9ImNlcnRfZG9tYWluX2xpbmsiIHRpdGxlPSIoW14iXSspIj4vOwogICAgICAgICAgdmFyIHJlc3VsdCA9IHJlLmV4ZWMoZGVzYyk7CiAgICAgICAgICBpZighcmVzdWx0KQogICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgLy8gUmVtb3ZlIHNkJ3MgZXhpc3RpbmcgY2hpbGRyZW4KICAgICAgICAgIHNkLnRleHRDb250ZW50ID0gIiI7CgogICAgICAgICAgLy8gRXZlcnl0aGluZyB1cCB0byB0aGUgbGluayBzaG91bGQgYmUgdGV4dCBjb250ZW50CiAgICAgICAgICBzZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkZXNjLnNsaWNlKDAsIHJlc3VsdC5pbmRleCkpKTsKCiAgICAgICAgICAvLyBOb3cgY3JlYXRlIHRoZSBsaW5rIGl0c2VsZgogICAgICAgICAgdmFyIGFuY2hvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYW5jaG9yRWwuc2V0QXR0cmlidXRlKCJpZCIsICJjZXJ0X2RvbWFpbl9saW5rIik7CiAgICAgICAgICBhbmNob3JFbC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgcmVzdWx0WzFdKTsKICAgICAgICAgIGFuY2hvckVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJlc3VsdFsxXSkpOwogICAgICAgICAgc2QuYXBwZW5kQ2hpbGQoYW5jaG9yRWwpOwoKICAgICAgICAgIC8vIEZpbmFsbHksIGFwcGVuZCB0ZXh0IGZvciBhbnl0aGluZyBhZnRlciB0aGUgY2xvc2luZyA8L2E+CiAgICAgICAgICBzZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkZXNjLnNsaWNlKGRlc2MuaW5kZXhPZigiPC9hPiIpICsgIjwvYT4iLmxlbmd0aCkpKTsKICAgICAgICB9CgogICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NlcnRfZG9tYWluX2xpbmsnKTsKICAgICAgICBpZiAoIWxpbmspCiAgICAgICAgICByZXR1cm47CgogICAgICAgIHZhciBva0hvc3QgPSBsaW5rLmdldEF0dHJpYnV0ZSgidGl0bGUiKTsKICAgICAgICB2YXIgdGhpc0hvc3QgPSBkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZTsKICAgICAgICB2YXIgcHJvdG8gPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbDsKCiAgICAgICAgLy8gSWYgb2tIb3N0IGlzIGEgd2lsZGNhcmQgZG9tYWluICgiKi5leGFtcGxlLmNvbSIpIGxldCdzCiAgICAgICAgLy8gdXNlICJ3d3ciIGluc3RlYWQuICAiKi5leGFtcGxlLmNvbSIgaXNuJ3QgZ29pbmcgdG8KICAgICAgICAvLyBnZXQgYW55b25lIGFueXdoZXJlIHVzZWZ1bC4gYnVnIDQzMjQ5MQogICAgICAgIG9rSG9zdCA9IG9rSG9zdC5yZXBsYWNlKC9eXCpcLi8sICJ3d3cuIik7CgogICAgICAgIC8qIGNhc2UgIzE6CiAgICAgICAgKiBleGFtcGxlLmNvbSB1c2VzIGFuIGludmFsaWQgc2VjdXJpdHkgY2VydGlmaWNhdGUuCiAgICAgICAgKgogICAgICAgICogVGhlIGNlcnRpZmljYXRlIGlzIG9ubHkgdmFsaWQgZm9yIHd3dy5leGFtcGxlLmNvbQogICAgICAgICoKICAgICAgICAqIE1ha2Ugc3VyZSB0byBpbmNsdWRlIHRoZSAiLiIgYWhlYWQgb2YgdGhpc0hvc3Qgc28gdGhhdAogICAgICAgICogYSBNaXRNIGF0dGFjayBvbiBwYXlwYWwuY29tIGRvZXNuJ3QgaHlwZXJsaW5rIHRvICJub3RwYXlwYWwuY29tIgogICAgICAgICoKICAgICAgICAqIFdlJ2Qgbm9ybWFsbHkganVzdCB1c2UgYSBSZWdFeHAgaGVyZSBleGNlcHQgdGhhdCB3ZSBsYWNrIGEKICAgICAgICAqIGxpYnJhcnkgZnVuY3Rpb24gdG8gZXNjYXBlIHRoZW0gcHJvcGVybHkgKGJ1ZyAyNDgwNjIpLCBhbmQKICAgICAgICAqIGRvbWFpbiBuYW1lcyBhcmUgZmFtb3VzIGZvciBoYXZpbmcgJy4nIGNoYXJhY3RlcnMgaW4gdGhlbSwKICAgICAgICAqIHdoaWNoIHdvdWxkIGFsbG93IHNwdXJpb3VzIGFuZCBwb3NzaWJseSBob3N0aWxlIG1hdGNoZXMuCiAgICAgICAgKi8KICAgICAgICBpZiAoZW5kc1dpdGgob2tIb3N0LCAiLiIgKyB0aGlzSG9zdCkpCiAgICAgICAgICBsaW5rLmhyZWYgPSBwcm90byArIG9rSG9zdDsKCiAgICAgICAgLyogY2FzZSAjMjoKICAgICAgICAqIGJyb3dzZXIuZ2FyYWdlLm1hZW1vLm9yZyB1c2VzIGFuIGludmFsaWQgc2VjdXJpdHkgY2VydGlmaWNhdGUuCiAgICAgICAgKgogICAgICAgICogVGhlIGNlcnRpZmljYXRlIGlzIG9ubHkgdmFsaWQgZm9yIGdhcmFnZS5tYWVtby5vcmcKICAgICAgICAqLwogICAgICAgIGlmIChlbmRzV2l0aCh0aGlzSG9zdCwgIi4iICsgb2tIb3N0KSkKICAgICAgICAgIGxpbmsuaHJlZiA9IHByb3RvICsgb2tIb3N0OwogICAgICB9CgogICAgICBmdW5jdGlvbiBlbmRzV2l0aChoYXlzdGFjaywgbmVlZGxlKSB7CiAgICAgICAgcmV0dXJuIGhheXN0YWNrLnNsaWNlKC1uZWVkbGUubGVuZ3RoKSA9PSBuZWVkbGU7CiAgICAgIH0KCiAgICBdXT48L3NjcmlwdD4KICA8L2hlYWQ+CgogIDxib2R5IGRpcj0ibHRyIj4KCiAgICA8IS0tIEVSUk9SIElURU0gQ09OVEFJTkVSIChyZW1vdmVkIGR1cmluZyBsb2FkaW5nIHRvIGF2b2lkIGJ1ZyAzOTA5OCkgLS0+CgoKICAgIDwhLS0gUEFHRSBDT05UQUlORVIgKGZvciBzdHlsaW5nIHB1cnBvc2VzIG9ubHkpIC0tPgogICAgPGRpdiBpZD0iZXJyb3JQYWdlQ29udGFpbmVyIj4KCiAgICAgIDwhLS0gRXJyb3IgVGl0bGUgLS0+CiAgICAgIDxkaXYgaWQ9ImVycm9yVGl0bGUiPgogICAgICAgIDxoMSBpZD0iZXJyb3JUaXRsZVRleHQiPlVuYWJsZSB0byBjb25uZWN0PC9oMT4KICAgICAgPC9kaXY+CgogICAgICA8IS0tIExPTkcgQ09OVEVOVCAodGhlIHNlY3Rpb24gbW9zdCBsaWtlbHkgdG8gcmVxdWlyZSBzY3JvbGxpbmcpIC0tPgogICAgICA8ZGl2IGlkPSJlcnJvckxvbmdDb250ZW50Ij4KCiAgICAgICAgPCEtLSBTaG9ydCBEZXNjcmlwdGlvbiAtLT4KICAgICAgICA8ZGl2IGlkPSJlcnJvclNob3J0RGVzYyI+CiAgICAgICAgICA8cCBpZD0iZXJyb3JTaG9ydERlc2NUZXh0Ij5GaXJlZm94IGNhbid0IGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlci48L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gTG9uZyBEZXNjcmlwdGlvbiAoTm90ZTogU2VlIG5ldEVycm9yLmR0ZCBmb3IgdXNlZCBYSFRNTCB0YWdzKSAtLT4KICAgICAgICA8ZGl2IGlkPSJlcnJvckxvbmdEZXNjIj4KPHVsPgogIDxsaT5UaGUgc2l0ZSBjb3VsZCBiZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZSBvciB0b28gYnVzeS4gVHJ5IGFnYWluIGluIGEgZmV3CiAgICBtb21lbnRzLjwvbGk+CiAgPGxpPklmIHlvdSBhcmUgdW5hYmxlIHRvIGxvYWQgYW55IHBhZ2VzLCBjaGVjayB5b3VyIGNvbXB1dGVyJ3MgbmV0d29yawogICAgY29ubmVjdGlvbi48L2xpPgogIDxsaT5JZiB5b3VyIGNvbXB1dGVyIG9yIG5ldHdvcmsgaXMgcHJvdGVjdGVkIGJ5IGEgZmlyZXdhbGwgb3IgcHJveHksIG1ha2Ugc3VyZQogICAgdGhhdCBGaXJlZm94IGlzIHBlcm1pdHRlZCB0byBhY2Nlc3MgdGhlIFdlYi48L2xpPgo8L3VsPgo8L2Rpdj4KCiAgICAgICAgPCEtLSBPdmVycmlkZSBzZWN0aW9uIC0gRm9yIHNzbCBlcnJvcnMgb25seS4gIFJlbW92ZWQgb24gaW5pdCBmb3Igb3RoZXIKICAgICAgICAgICAgZXJyb3IgdHlwZXMuICAtLT4KCiAgICAgIDwvZGl2PgoKICAgICAgPCEtLSBSZXRyeSBCdXR0b24gLS0+CiAgICAgIDxidXR0b24gaWQ9ImVycm9yVHJ5QWdhaW4iIGF1dG9jb21wbGV0ZT0ib2ZmIiBvbmNsaWNrPSJyZXRyeVRoaXModGhpcyk7IiBhdXRvZm9jdXM9InRydWUiPlRyeSBBZ2FpbjwvYnV0dG9uPgogICAgICA8c2NyaXB0PgogICAgICAgIC8vIE9ubHkgZG8gYXV0b2ZvY3VzIGlmIHdlJ3JlIHRoZSB0b3BsZXZlbCBmcmFtZTsgb3RoZXJ3aXNlIHdlCiAgICAgICAgLy8gZG9uJ3Qgd2FudCB0byBjYWxsIGF0dGVudGlvbiB0byBvdXJzZWx2ZXMhICBUaGUga2V5IHBhcnQgaXMKICAgICAgICAvLyB0aGF0IGF1dG9mb2N1cyBoYXBwZW5zIG9uIGluc2VydGlvbiBpbnRvIHRoZSB0cmVlLCBzbyB3ZQogICAgICAgIC8vIGNhbiByZW1vdmUgdGhlIGJ1dHRvbiwgYWRkIEBhdXRvZm9jdXMsIGFuZCByZWluc2VydCB0aGUKICAgICAgICAvLyBidXR0b24uCiAgICAgICAgaWYgKHdpbmRvdy50b3AgPT0gd2luZG93KSB7CiAgICAgICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3JUcnlBZ2FpbiIpOwogICAgICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBidXR0b24ubmV4dFNpYmxpbmc7CiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBidXR0b24ucGFyZW50Tm9kZTsKICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGJ1dHRvbik7CiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoImF1dG9mb2N1cyIsICJ0cnVlIik7CiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoYnV0dG9uLCBuZXh0U2libGluZyk7CiAgICAgICAgfQogICAgICA8L3NjcmlwdD4KCiAgICA8L2Rpdj4KCiAgICA8IS0tCiAgICAtIE5vdGU6IEl0IGlzIGltcG9ydGFudCB0byBydW4gdGhlIHNjcmlwdCB0aGlzIHdheSwgaW5zdGVhZCBvZiB1c2luZwogICAgLSBhbiBvbmxvYWQgaGFuZGxlci4gVGhpcyBpcyBiZWNhdXNlIGVycm9yIHBhZ2VzIGFyZSBsb2FkZWQgYXMKICAgIC0gTE9BRF9CQUNLR1JPVU5ELCB3aGljaCBtZWFucyB0aGF0IG9ubG9hZCBoYW5kbGVycyB3aWxsIG5vdCBiZSBleGVjdXRlZC4KICAgIC0tPgogICAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5pbml0UGFnZSgpOzwvc2NyaXB0PgoKICA8L2JvZHk+CjwvaHRtbD4K"

safari = "PCEtLSBMT0NBTElaRVJTOiBFYWNoIGxvY2FsaXphYmxlIHBpZWNlIG9mIHRoZSBwYWdlIGlzIG1hcmtlZCB3aXRoIGEgY29tbWVudCAtLT4KCjxIVE1MPgo8IS0tIExPQ0FMSVpFUlM6IElmIGluIGEgcmlnaHQtdG8tbGVmdCBsb2NhbGUsIGFkZCBkaXI9InJ0bCIgdG8gdGhlIEhUTUwgZWxlbWVudC4gLS0+CjxIRUFEPgogICAgPExJTksgcmVsPXN0eWxlc2hlZXQgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImZpbGU6Ly8vQXBwbGljYXRpb25zL1NhZmFyaS5hcHAvQ29udGVudHMvUmVzb3VyY2VzL3BhZ2UtbG9hZC1lcnJvcnMuY3NzIj4KICAgIDwhLS0gTE9DQUxJWkVSUzogWW91IG1pZ2h0IHdhbnQgdG8gY2hhbmdlIHRoZSBmb250IGZhbWlseS4gWW91IGNhbiBhbHNvIGFkZCBzdHlsZXMgdG8gb3ZlcnJpZGUgc2l6ZXMsIGV0Yy4gLS0+CiAgICA8U1RZTEU+CiAgICAgICAgQk9EWSB7Zm9udC1mYW1pbHk6J0hlbHZldGljYSBOZXVlJzt9CiAgICA8L1NUWUxFPgoKICAgIDwhLS0gTE9DQUxJWkVSUzogVGhlIG5leHQgbGluZSBjb250YWlucyB0aGUgcGFnZSB0aXRsZSB0aGF0IGFwcGVhcnMgaW4gdGhlIHdpbmRvdydzIHRpdGxlIGJhciAtLT4KICAgIDxUSVRMRT5GYWlsZWQgdG8gb3BlbiBwYWdlPC9USVRMRT4KCjwvSEVBRD4KCjxCT0RZPgo8ZGl2IGNsYXNzPSJlcnJvci1jb250YWluZXIiPgo8ZGl2IGNsYXNzPSJpY29uIiByb2xlPSJpbWciIGFsdD0iU2FmYXJpIEljb24iPjwvZGl2PgoKPGRpdiBjbGFzcz0idGV4dC1jb250YWluZXIiPgo8IS0tIG1haW4gdGl0bGUgaGVyZSwgcmVwZWF0ZWQgMyB0aW1lcyAtLT4KPFAgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJlcnJvci10aXRsZSBlcnJvci10ZXh0LWVuZ3JhdmluZyI+WW91IGFyZSBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm5ldCA8QSBpZD0iaGVscC1idXR0b24iPjwvYT48L1A+CjxQIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZXJyb3ItdGl0bGUgZXJyb3ItdGV4dCI+WW91IGFyZSBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm5ldCA8QSBpZD0iaGVscC1idXR0b24iPjwvYT48L1A+CjxQIGNsYXNzPSJlcnJvci10aXRsZSBlcnJvci10ZXh0LWlubmVyLXNoYWRvdyI+WW91IGFyZSBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm5ldCA8QSBhcmlhLWxhYmVsPSJIZWxwIiByb2xlPSJidXR0b24iIGlkPSJoZWxwLWJ1dHRvbiIgY2xhc3M9IiIgSFJFRj0nb3Blbi1oZWxwLWFuY2hvcjppYnJ3YTAwNyc+PC9hPjwvUD4KPC9kaXY+CjxkaXYgY2xhc3M9InRleHQtY29udGFpbmVyIj4KPCEtLSBlcnJvciBtZXNzYWdlIGhlcmUsIHJlcGVhdGVkIDMgdGltZXMgLS0+CjxQIGNsYXNzPSJlcnJvci1tZXNzYWdlIGVycm9yLXRleHQtZW5ncmF2aW5nIj5UaGlzIHBhZ2UgY2Fu4oCZdCBiZSBkaXNwbGF5ZWQgYmVjYXVzZSB5b3VyIGNvbXB1dGVyIGlzIGN1cnJlbnRseSBvZmZsaW5lPC9QPgo8UCBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImVycm9yLW1lc3NhZ2UgZXJyb3ItdGV4dCI+VGhpcyBwYWdlIGNhbuKAmXQgYmUgZGlzcGxheWVkIGJlY2F1c2UgeW91ciBjb21wdXRlciBpcyBjdXJyZW50bHkgb2ZmbGluZTwvUD4KPFAgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJlcnJvci1tZXNzYWdlIGVycm9yLXRleHQtaW5uZXItc2hhZG93Ij5UaGlzIHBhZ2UgY2Fu4oCZdCBiZSBkaXNwbGF5ZWQgYmVjYXVzZSB5b3VyIGNvbXB1dGVyIGlzIGN1cnJlbnRseSBvZmZsaW5lPC9QPgo8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGNsYXNzPSJzdWdnZXN0aW9uLWNvbnRhaW5lciI+CjxkaXYgY2xhc3M9InRleHQtY29udGFpbmVyIj4KPCEtLSBMT0NBTElaRVJTOiBsb2NhbGl6ZSB0aGUgcHJvbXB0IChyZXBlYXRlZCAzIHRpbWVzKSBhbmQgdGhlIGJ1dHRvbiB0aXRsZS4gLS0+CjxwIGNsYXNzPSJzdWdnZXN0aW9uLXByb21wdCBlcnJvci10ZXh0LWVuZ3JhdmluZyI+PHNwYW4gY2xhc3M9InJlYWRpbmctbGlzdC1nbGFzc2VzIiBhbHQ9IlNhZmFyaSBSZWFkaW5nIExpc3QgSWNvbiIgcm9sZT0iaW1nIj48L3NwYW4+UmVhZGluZyBMaXN0IGFydGljbGVzIGFyZSBhdmFpbGFibGUgZm9yIHZpZXdpbmcgd2hpbGUgeW91IGFyZSBvZmZsaW5lLjwvcD4KPHAgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJzdWdnZXN0aW9uLXByb21wdCBlcnJvci10ZXh0Ij48c3BhbiBjbGFzcz0icmVhZGluZy1saXN0LWdsYXNzZXMiIGFsdD0iU2FmYXJpIFJlYWRpbmcgTGlzdCBJY29uIiByb2xlPSJpbWciPjwvc3Bhbj5SZWFkaW5nIExpc3QgYXJ0aWNsZXMgYXJlIGF2YWlsYWJsZSBmb3Igdmlld2luZyB3aGlsZSB5b3UgYXJlIG9mZmxpbmUuPC9wPgo8cCBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN1Z2dlc3Rpb24tcHJvbXB0IGVycm9yLXRleHQtaW5uZXItc2hhZG93Ij48c3BhbiBjbGFzcz0icmVhZGluZy1saXN0LWdsYXNzZXMiIGFsdD0iU2FmYXJpIFJlYWRpbmcgTGlzdCBJY29uIiByb2xlPSJpbWciPjwvc3Bhbj5SZWFkaW5nIExpc3QgYXJ0aWNsZXMgYXJlIGF2YWlsYWJsZSBmb3Igdmlld2luZyB3aGlsZSB5b3UgYXJlIG9mZmxpbmUuPC9wPgo8L2Rpdj4KPGZvcm0gY2xhc3M9InN1Z2dlc3Rpb24tZm9ybSIgbWV0aG9kPUdFVCBhY3Rpb249J3Nob3ctcmVhZGluZy1saXN0Oic+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdTaG93IFJlYWRpbmcgTGlzdCc+PC9mb3JtPgo8L2Rpdj4KPC9CT0RZPgoKPC9IVE1MPgo="



function swap(browser) {
  console.log(browser)
  var code
  if (browser === 'Chrome') {
    code = chrome
  } else if (browser === 'Safari') {
    code = safari
  } else if (browser === 'Firefox') {
    code = firefox
  }
  document.getElementsByTagName("html")[0].innerHTML = atob(code)
}


swap(BrowserDetect.browser)

</script>

</html>
